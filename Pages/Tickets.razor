@page "/tickets"

@using Loteria.Data.Core
@using Loteria.Data.Helper
@using Loteria.Data.Models
@using Loteria.Data.Services

@inject LotoServices LotoServices

<PageTitle>Tickets</PageTitle>

<LotoTable LotosInDb=@lotosInDb Tickets=4 Title="Formula de Pedro v1.2" Lotos=@LotosPedro Description="Generación de numeros de 10 en 10 cada 2 posiciones." />
<LotoTable LotosInDb=@lotosInDb Tickets=6 Title="Generación automática." Lotos=@LotosRafa Description="Generación del 1 al 38" />
<TripletaTable TripletasInDb=@tripletasInDb Tickets=10 Title="Titulo" Description="Generacion del 00 al 99 sin repetición." Tripletas=@Tripletas />


@code {
    List<Loto> LotosPedro = new();
    List<Loto> LotosRafa = new();
    List<Loto> LotosInDb = new();

    List<Tripleta> Tripletas = new();

    float tripletasInDb = 0f;
    float lotosInDb = 0f;

    Generator Gen = new();

    protected override async Task OnInitializedAsync()
    {
        await LoadData();
    }

    private async Task LoadData()
    {
        int tickets = 4;
        /// Jugada de Pedro
        LotosPedro = Gen.FormulaDePedro(tickets);

        /// Jugada de Rafa
        LotosRafa = Gen.Gen1To38();

        /// Todos salidos anteriormente
        LotosInDb = LotoServices.GetAll<Loto>("loto");

        tripletasInDb = DataHelper.Instance.Tripletas.Count;
        lotosInDb = DataHelper.Instance.Lotos.Count;

        /// Tripletas
        Tripletas = Gen.GenTripleta(10);

        await Task.CompletedTask;
    }
}